{"title":"Plotting dynamic maps with mapview","markdown":{"yaml":{"title":"Plotting dynamic maps with mapview","date":"2022-08-10","slug":[],"categories":["R","Spatial Data","Data Visualization"],"tags":["R","spatial data","data visualization"],"image":"thumb.png","description":"Cool mapping features in R with mapview."},"headingText":"Overlaying points on a polygon","containsRefs":false,"markdown":"\n\nI've spent a lot of time working with spatial data recently, and came across a cool tool to display maps that I thought was worth writing about. Here are some of the cool features you can find in [`mapview`](https://www.rdocumentation.org/packages/mapview/versions/2.11.0).\n\nI'll be using the included `breweries`, and `franconia` datasets to show off some of the features I found useful for making dynamic maps.\n\n\nMapview can stack maps on each other with ease. For example, we can take the shape files from the franconia data, and overlay the breweries' coordinates on the same map. Notice when you click on either a point or polygon you get information about the specific data.\n\n```{r}\npacman::p_load(mapview, leafsync, leaflet.extras2, dplyr)\n\nregions = mapview(franconia,\n  zcol = \"NAME_ASCI\",\n  legend = FALSE\n)\n\nbrew = mapview(breweries,\n  legend = FALSE,\n  cex = breweries$number.of.types, # size based on number of beers\n  col.regions = \"white\") # color points white \n\nregions + brew\n```\n\n### Comparing two maps side by side\n\nOne of the cooler features I've come across comes from `leafsync::sync()`, which allows you to place two mapview maps next to each other, and mirror the location of your mouse from one map to the next. Admittedly this isn't the best usecase for this comparison, but lets compare the maps showing breweries founded before the year 1800 and after.\n\n```{r}\nCUTOFF = 1800\nmap_pre = regions + \n  mapview(breweries |>\n            filter(founded < CUTOFF),\n          legend = FALSE,\n          col.regions = \"blue\")\n\nmap_post = regions + \n  mapview(breweries |>\n            filter(founded >= CUTOFF),\n          legend = FALSE,\n          col.regions = \"green\")\n\nsync(map_pre, map_post)\n```\n\nAdditionally, you can add a slider to compare the two maps in the same map.\n\n```{r}\nmap_pre | map_post\n```\n\nI'm sure there is plenty more use cases and functionality available within mapview, but these are some of the cases I've come across that I've found helpful in my workflow.\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.313","theme":{"light":["sandstone","../../_light.scss"],"dark":["sandstone","../../_dark.scss"]},"editor":"source","title":"Plotting dynamic maps with mapview","date":"2022-08-10","slug":[],"categories":["R","Spatial Data","Data Visualization"],"tags":["R","spatial data","data visualization"],"image":"thumb.png","description":"Cool mapping features in R with mapview."},"extensions":{"book":{"multiFile":true}}}}}